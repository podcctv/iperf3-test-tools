<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Iperf3 èŠ‚ç‚¹ç›‘æ§ä¸­å¿ƒ</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/themes/dark.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@radix-ui/themes@3.1.1/dist/css/themes.css" />
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/shoelace.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/static/glass-design.css" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/static/theme.css" />
  <link rel="stylesheet" href="/static/sidebar.css" />
  <link rel="stylesheet" href="/static/dashboard.css" />
  <link rel="stylesheet" href="/static/animations.css" />
  <link rel="stylesheet" href="/static/loading.css" />
  <link rel="stylesheet" href="/static/responsive.css" />
  <script src="/static/theme.js" defer></script>
  <style>
    :root {
      --primary: #3b82f6;
      --primary-hover: #2563eb;
      --bg-dark: #0f172a;
      --card-bg: rgba(30, 41, 59, 0.7);
      --glass-border: rgba(255, 255, 255, 0.08);
      --text-main: #f8fafc;
      --text-muted: #94a3b8;
    }
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background-color: var(--bg-dark);
      background-image: 
        radial-gradient(at 0% 0%, rgba(56, 189, 248, 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 0%, rgba(139, 92, 246, 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 100%, rgba(16, 185, 129, 0.15) 0px, transparent 50%),
        radial-gradient(at 0% 100%, rgba(244, 63, 94, 0.15) 0px, transparent 50%);
      background-attachment: fixed;
      color: var(--text-main);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .page-frame {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 2.5rem 1.5rem;
    }
    .page-content {
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    
    /* Dashboard Header */
    .dashboard-header {
      background: linear-gradient(
        135deg,
        rgba(30, 41, 59, 0.7) 0%,
        rgba(15, 23, 42, 0.5) 100%
      );
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 1.25rem;
      padding: 1.5rem 2rem;
      margin-bottom: 0.5rem;
      backdrop-filter: blur(12px);
      box-shadow: 
        0 4px 20px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }
    .dashboard-title {
      font-size: 1.75rem;
      font-weight: 700;
      background: linear-gradient(135deg, #60a5fa, #c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
    }
    .dashboard-subtitle {
      color: var(--text-muted);
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    .dashboard-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: rgba(56, 189, 248, 0.7);
      margin-bottom: 0.25rem;
    }
    
    .glass-panel {
      background: var(--card-bg);
      backdrop-filter: blur(12px);
      border: 1px solid var(--glass-border);
      border-radius: 1.5rem;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    
    /* Dropdown Menu Styles */
    .nav-dropdown {
      position: relative;
      display: inline-block;
    }
    .nav-dropdown-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
    }
    .nav-dropdown-btn::after {
      content: 'â–¼';
      font-size: 0.6rem;
      opacity: 0.7;
      transition: transform 0.2s;
    }
    .nav-dropdown:hover .nav-dropdown-btn::after {
      transform: rotate(180deg);
    }
    .nav-dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      min-width: 160px;
      margin-top: 0.25rem;
      padding: 0.5rem 0;
      background: rgba(30, 41, 59, 0.98);
      border: 1px solid rgba(71, 85, 105, 0.5);
      border-radius: 0.75rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-8px);
      transition: all 0.2s ease;
      z-index: 1000;
    }
    .nav-dropdown:hover .nav-dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    .nav-dropdown-item {
      display: block;
      padding: 0.625rem 1rem;
      color: #e2e8f0;
      font-size: 0.875rem;
      text-decoration: none;
      transition: all 0.15s;
    }
    .nav-dropdown-item:hover {
      background: rgba(56, 189, 248, 0.1);
      color: #38bdf8;
    }
    
    /* Login Specifics */
    .login-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex: 1;
      min-height: 70vh;
      padding: 2rem;
    }
    .login-card {
      width: 100%;
      max-width: 460px;
      padding: 3rem 2.5rem;
      position: relative;
      overflow: hidden;
      border-radius: 1.5rem;
    }
    .login-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; height: 4px;
      background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
    }
    .login-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
    }
    .login-logo-icon {
      width: 72px;
      height: 72px;
      border-radius: 1.25rem;
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.25rem;
      box-shadow: 
        0 8px 32px rgba(59, 130, 246, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    .login-title {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-align: center;
      background: linear-gradient(to right, #60a5fa, #c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .login-subtitle {
      text-align: center;
      color: var(--text-muted);
      font-size: 0.875rem;
      margin-bottom: 2rem;
      line-height: 1.5;
    }
    .login-divider {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin: 1.75rem 0;
      color: var(--text-muted);
      font-size: 0.75rem;
    }
    .login-divider::before,
    .login-divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.3), transparent);
    }
    .login-footer {
      margin-top: 0;
      text-align: center;
    }
    .github-badges {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 1.25rem;
    }
    .github-badges a {
      transition: transform 0.2s ease, opacity 0.2s ease;
    }
    .github-badges a:hover {
      transform: translateY(-2px);
    }
    .login-copyright {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin: 0;
      line-height: 1.6;
    }
    .login-copyright a {
      color: #60a5fa;
      text-decoration: none;
      transition: color 0.2s;
    }
    .login-copyright a:hover {
      color: #93c5fd;
    }
    .login-copyright a.author {
      color: #c084fc;
    }
    .login-copyright a.author:hover {
      color: #d8b4fe;
    }
    
    .form-group { margin-bottom: 1.5rem; }
    .form-label {
      display: block;
      color: #e2e8f0;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }
    .form-input {
      width: 100%;
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 0.75rem;
      padding: 0.75rem 1rem;
      color: #fff;
      font-size: 0.95rem;
      transition: all 0.2s;
    }
    .form-input:focus {
      outline: none;
      border-color: #60a5fa;
      box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.2);
      background: rgba(15, 23, 42, 0.8);
    }
    
    .btn-primary {
      width: 100%;
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%);
      color: white;
      font-weight: 600;
      padding: 0.75rem;
      border-radius: 0.75rem;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      position: relative;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 
        0 1px 2px 0 rgba(0, 0, 0, 0.05),
        0 4px 12px rgba(37, 99, 235, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 8px 20px rgba(37, 99, 235, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }
    .btn-primary:hover::before {
      left: 100%;
    }
    .btn-primary:active { 
      transform: translateY(0); 
      box-shadow: 
        0 1px 2px 0 rgba(0, 0, 0, 0.05),
        0 2px 8px rgba(37, 99, 235, 0.3);
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.375rem 1rem;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
      border: 1px solid rgba(148, 163, 184, 0.2);
      color: var(--text-muted);
      margin: 0 auto;
      box-shadow: 
        0 1px 2px 0 rgba(0, 0, 0, 0.05),
        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
      transition: all 0.3s ease;
    }
    .status-badge:hover {
      transform: scale(1.05);
      border-color: rgba(148, 163, 184, 0.3);
    }
    .status-dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      background-color: #fbbf24;
      box-shadow: 
        0 0 0 2px rgba(251, 191, 36, 0.2),
        0 0 8px rgba(251, 191, 36, 0.6);
      animation: pulse-dot 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    @keyframes pulse-dot {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.3), 0 0 12px rgba(251, 191, 36, 0.8); }
    }
    
    /* Online Status Dot - Breathing Animation */
    .status-dot-online {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3), 0 0 8px rgba(34, 197, 94, 0.6);
      animation: breathe-online 2s ease-in-out infinite;
    }
    @keyframes breathe-online {
      0%, 100% { 
        box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3), 0 0 8px rgba(34, 197, 94, 0.6);
        transform: scale(1);
      }
      50% { 
        box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2), 0 0 16px rgba(34, 197, 94, 0.8);
        transform: scale(1.1);
      }
    }
    
    /* Streaming Badges Flex Layout */
    .streaming-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    .streaming-badge {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 2px;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 10px;
      font-weight: 600;
      border: 1px solid;
      transition: all 0.15s ease;
    }
    .streaming-badge:hover {
      transform: translateY(-1px);
    }
    /* Region corner badge */
    .region-corner {
      position: absolute;
      top: -5px;
      right: -3px;
      font-size: 8px;
      font-weight: 700;
      padding: 1px 3px;
      border-radius: 3px;
      background: rgba(0, 0, 0, 0.75);
      color: #94a3b8;
      line-height: 1;
      letter-spacing: 0.02em;
    }
    /* Streaming Badge Colors */
    .streaming-native { color: #4ade80; border-color: rgba(34, 197, 94, 0.4); background: rgba(34, 197, 94, 0.12); }
    .streaming-dns { color: #a78bfa; border-color: rgba(139, 92, 246, 0.4); background: rgba(139, 92, 246, 0.12); }
    .streaming-failed { color: #64748b; border-color: rgba(71, 85, 105, 0.4); background: rgba(30, 41, 59, 0.6); }
    
    /* Ping Latency Tags - Outline Style */
    .ping-tag {
      display: inline-flex;
      align-items: center;
      gap: 3px;
      padding: 2px 8px;
      border-radius: 5px;
      font-size: 10px;
      font-weight: 600;
      border: 1px solid;
      background: transparent;
      transition: all 0.15s ease;
    }
    .ping-tag:hover { transform: scale(1.05); }
    .ping-good { color: #4ade80; border-color: rgba(34, 197, 94, 0.4); }
    .ping-medium { color: #fbbf24; border-color: rgba(251, 191, 36, 0.4); }
    .ping-bad { color: #f87171; border-color: rgba(248, 113, 113, 0.4); }
    .ping-carrier {
      font-size: 9px;
      opacity: 0.7;
      font-weight: 500;
    }
    

    /* Dashboard Specifics */
    .panel-card {
      background: linear-gradient(
        145deg,
        rgba(30, 41, 59, 0.75) 0%,
        rgba(20, 30, 48, 0.65) 100%
      );
      border: 1px solid rgba(148, 163, 184, 0.12);
      border-radius: 1.25rem;
      backdrop-filter: blur(16px);
      box-shadow: 
        0 4px 24px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.03) inset;
      position: relative;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .panel-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 1.5rem;
      right: 1.5rem;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent);
    }
    .panel-card:hover {
      border-color: rgba(148, 163, 184, 0.2);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
    }
    .panel-card-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: #f8fafc;
      margin: 0;
    }
    .panel-card-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }
    .alert {
      padding: 0.75rem 1rem;
      border-radius: 0.75rem;
      font-size: 0.9rem;
      margin-bottom: 1rem;
      border: 1px solid transparent;
      backdrop-filter: blur(8px);
    }
    .alert-error {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1));
      border-color: rgba(239, 68, 68, 0.3);
      color: #fca5a5;
      box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.1) inset;
    }
    .alert-success {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.1));
      border-color: rgba(34, 197, 94, 0.3);
      color: #86efac;
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.1) inset;
    }
    .hidden { display: none !important; }

    /* Animations */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }
    .animate-shake {
      animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
      border-color: rgba(239, 68, 68, 0.5);
      box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.1);
    }
    
    @keyframes success-pulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); border-color: rgba(34, 197, 94, 0.4); }
      50% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); border-color: rgba(34, 197, 94, 0.8); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); border-color: rgba(34, 197, 94, 0.4); }
    }
    .animate-success {
      animation: success-pulse 0.6s ease-out;
      border-color: rgba(34, 197, 94, 0.6);
    }
    
    /* Custom Modal Styles */
    .custom-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
    }
    .custom-modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    .custom-modal {
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5), 0 0 1px rgba(255, 255, 255, 0.1) inset;
      padding: 1.5rem;
      max-width: 420px;
      width: 90%;
      transform: scale(0.9) translateY(-20px);
      transition: transform 0.2s ease;
    }
    .custom-modal-overlay.show .custom-modal {
      transform: scale(1) translateY(0);
    }
    .custom-modal-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    .custom-modal-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    .custom-modal-icon.warning {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.3));
      border: 1px solid rgba(245, 158, 11, 0.4);
    }
    .custom-modal-icon.danger {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(185, 28, 28, 0.3));
      border: 1px solid rgba(239, 68, 68, 0.4);
    }
    .custom-modal-icon.info {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.3));
      border: 1px solid rgba(59, 130, 246, 0.4);
    }
    .custom-modal-icon.success {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.3));
      border: 1px solid rgba(34, 197, 94, 0.4);
    }
    .custom-modal-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: #f8fafc;
      margin: 0;
    }
    .custom-modal-body {
      color: #94a3b8;
      font-size: 0.9375rem;
      line-height: 1.6;
      margin-bottom: 1.5rem;
      padding-left: 0.5rem;
    }
    .custom-modal-body ul {
      margin: 0.75rem 0;
      padding-left: 1.25rem;
    }
    .custom-modal-body li {
      margin: 0.375rem 0;
    }
    .custom-modal-body .warning-text {
      color: #fbbf24;
      font-weight: 500;
    }
    .custom-modal-body .danger-text {
      color: #f87171;
      font-weight: 500;
    }
    .custom-modal-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
    }
    .modal-btn {
      padding: 0.625rem 1.25rem;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
      border: 1px solid transparent;
    }
    .modal-btn-cancel {
      background: rgba(71, 85, 105, 0.5);
      border-color: rgba(100, 116, 139, 0.5);
      color: #cbd5e1;
    }
    .modal-btn-cancel:hover {
      background: rgba(71, 85, 105, 0.7);
      border-color: rgba(100, 116, 139, 0.7);
    }
    .modal-btn-confirm {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
    }
    .modal-btn-confirm:hover {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
    }
    .modal-btn-danger {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }
    .modal-btn-danger:hover {
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
    }
    
    /* Sparkline Popover - Compact Design */
    .sparkline-popover {
      position: fixed;
      z-index: 9999;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(30, 41, 59, 0.98));
      border: 1px solid rgba(100, 116, 139, 0.3);
      border-radius: 10px;
      padding: 10px 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255,255,255,0.05) inset;
      backdrop-filter: blur(12px);
      pointer-events: none;
      opacity: 0;
      transform: translateY(8px) scale(0.95);
      transition: opacity 0.15s ease, transform 0.15s ease;
      min-width: 220px;
    }
    .sparkline-popover.show {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .sparkline-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
    }
    .sparkline-carrier {
      font-weight: 700;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 4px;
    }
    .sparkline-carrier.cu { color: #fca5a5; background: rgba(239, 68, 68, 0.2); }
    .sparkline-carrier.cm { color: #93c5fd; background: rgba(59, 130, 246, 0.2); }
    .sparkline-carrier.ct { color: #86efac; background: rgba(34, 197, 94, 0.2); }
    .sparkline-title {
      font-size: 10px;
      color: #64748b;
    }
    .sparkline-canvas-wrap {
      background: rgba(0,0,0,0.2);
      border-radius: 6px;
      padding: 4px;
      margin-bottom: 6px;
    }
    .sparkline-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 4px;
      font-size: 9px;
    }
    .sparkline-stats .stat-item {
      text-align: center;
      padding: 3px 0;
      border-radius: 4px;
      background: rgba(0,0,0,0.2);
    }
    .sparkline-stats .stat-label { color: #64748b; display: block; }
    .sparkline-stats .stat-value { font-weight: 700; font-size: 10px; }
    .sparkline-stats .current .stat-value { color: #22d3ee; }
    .sparkline-stats .avg .stat-value { color: #a78bfa; }
    .sparkline-stats .min .stat-value { color: #4ade80; }
    .sparkline-stats .max .stat-value { color: #f87171; }
    
    /* ============ Mobile Responsive Styles ============ */
    
    /* Mobile Navigation */
    @media (max-width: 768px) {
      .nav-dropdown-menu { min-width: 180px; }
      .container { padding-left: 12px; padding-right: 12px; }
    }
    
    /* Mobile: < 640px */
    @media (max-width: 640px) {
      /* Header adjustments */
      .flex-wrap.items-center.gap-3 { gap: 6px; }
      
      /* Full width buttons on mobile */
      .mobile-full-width { width: 100% !important; }
      
      /* Card grid - single column */
      .grid.grid-cols-1.lg\\:grid-cols-2 { grid-template-columns: 1fr !important; }
      
      /* Smaller text on mobile */
      .text-3xl { font-size: 1.5rem !important; }
      .text-2xl { font-size: 1.25rem !important; }
      .text-xl { font-size: 1.1rem !important; }
      
      /* Touch-friendly buttons */
      button, .btn-primary, [class*="rounded-lg"][class*="px-4"] {
        min-height: 44px;
        padding-top: 10px;
        padding-bottom: 10px;
      }
      
      /* Ping badges wrap */
      .flex.flex-wrap.gap-2 { gap: 4px; }
      .flex.flex-wrap.gap-2 > span { font-size: 10px; padding: 4px 8px; }
      
      /* Streaming badges horizontal scroll */
      .streaming-badges-mobile {
        display: flex;
        overflow-x: auto;
        gap: 6px;
        padding-bottom: 4px;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
      }
      .streaming-badges-mobile::-webkit-scrollbar { display: none; }
      
      /* Modal full screen on mobile */
      .custom-modal {
        width: 95vw;
        max-width: none;
        margin: 10px;
        max-height: 90vh;
        overflow-y: auto;
      }
      
      /* Sparkline popover adjustment */
      .sparkline-popover {
        left: 10px !important;
        right: 10px !important;
        width: auto !important;
      }
      
      /* Node card actions */
      .node-card-actions {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .node-card-actions button {
        width: 100%;
      }
    }
    
    /* Tablet: 641px - 1024px */
    @media (min-width: 641px) and (max-width: 1024px) {
      .grid.grid-cols-1.lg\\:grid-cols-2 { grid-template-columns: repeat(2, 1fr) !important; }
      
      /* Two column VPS summary on tablet */
      .grid.lg\\:grid-cols-4 { grid-template-columns: repeat(2, 1fr) !important; }
    }
    
    /* Hide on mobile helper */
    @media (max-width: 640px) {
      .hide-mobile { display: none !important; }
    }
    
    /* Show only on mobile helper */
    @media (min-width: 641px) {
      .show-mobile-only { display: none !important; }
    }
    
    /* ============================================
       Sidebar Navigation System
       ============================================ */
    
    /* Layout Container */
    .app-layout {
        display: flex;
        min-height: 100vh;
    }
    
    /* Sidebar Base */
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: var(--sidebar-width, 240px);
        background: var(--sidebar-bg, rgba(15, 23, 42, 0.98));
        border-right: 1px solid var(--sidebar-border, rgba(255, 255, 255, 0.06));
        display: flex;
        flex-direction: column;
        z-index: 100;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s ease;
        backdrop-filter: blur(12px);
    }
    
    /* Sidebar Brand/Logo Area */
    .sidebar-brand {
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid var(--sidebar-border, rgba(255, 255, 255, 0.06));
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .sidebar-logo {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        color: white;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    
    .sidebar-title {
        font-size: 1.125rem;
        font-weight: 700;
        color: var(--text-main, #f8fafc);
        letter-spacing: -0.025em;
    }
    
    .sidebar-subtitle {
        font-size: 0.75rem;
        color: var(--text-muted, #94a3b8);
        margin-top: 2px;
    }
    
    /* Navigation Menu */
    .sidebar-nav {
        flex: 1;
        padding: 1rem 0;
        overflow-y: auto;
    }
    
    .nav-section {
        padding: 0.5rem 1rem;
    }
    
    .nav-section-title {
        font-size: 0.6875rem;
        font-weight: 600;
        color: var(--text-dimmed, #64748b);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 0.5rem 0.75rem;
    }
    
    .nav-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.625rem 0.75rem;
        margin: 0.125rem 0.5rem;
        border-radius: 0.5rem;
        color: var(--text-muted, #94a3b8);
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.15s ease;
        cursor: pointer;
    }
    
    .nav-item:hover {
        background: rgba(59, 130, 246, 0.1);
        color: var(--text-main, #f8fafc);
    }
    
    .nav-item.active {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.1));
        color: var(--primary, #3b82f6);
        box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.2);
    }
    
    .nav-item-icon {
        width: 1.25rem;
        height: 1.25rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
    }
    
    /* Sidebar Footer */
    .sidebar-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid var(--sidebar-border, rgba(255, 255, 255, 0.06));
    }
    
    .sidebar-user {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: background 0.15s ease;
    }
    
    .sidebar-user:hover {
        background: rgba(255, 255, 255, 0.05);
    }
    
    .sidebar-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: linear-gradient(135deg, #10b981, #3b82f6);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.875rem;
        color: white;
        font-weight: 600;
    }
    
    .sidebar-user-info {
        flex: 1;
        min-width: 0;
    }
    
    .sidebar-user-name {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--text-main, #f8fafc);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .sidebar-user-role {
        font-size: 0.75rem;
        color: var(--text-muted, #94a3b8);
    }
    
    /* Main Content Area */
    .main-content {
        flex: 1;
        margin-left: var(--sidebar-width, 240px);
        min-height: 100vh;
        transition: margin-left 0.3s ease;
    }
    
    /* Mobile Responsive */
    @media (max-width: 1024px) {
        .sidebar {
            transform: translateX(-100%);
        }
        
        .sidebar.open {
            transform: translateX(0);
        }
        
        .main-content {
            margin-left: 0;
        }
        
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 99;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }
    }
    
    /* Mobile Toggle Button */
    .mobile-menu-btn {
        display: none;
        position: fixed;
        top: 1rem;
        left: 1rem;
        z-index: 101;
        width: 44px;
        height: 44px;
        border-radius: 0.75rem;
        background: var(--card-bg, rgba(30, 41, 59, 0.9));
        border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.08));
        color: var(--text-main, #f8fafc);
        font-size: 1.25rem;
        cursor: pointer;
        transition: all 0.15s ease;
        backdrop-filter: blur(8px);
    }
    
    .mobile-menu-btn:hover {
        background: var(--card-hover, rgba(30, 41, 59, 0.95));
        transform: scale(1.05);
    }
    
    @media (max-width: 1024px) {
        .mobile-menu-btn {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    }
  </style>
</head>
<body>
  <!-- Guest Mode Banner -->
  <div id="guest-banner" class="hidden" style="position:fixed;top:0;left:0;right:0;z-index:9999;background:linear-gradient(90deg,#f59e0b,#d97706);text-align:center;padding:8px 16px;font-size:14px;font-weight:600;color:#1e293b;box-shadow:0 2px 8px rgba(0,0,0,0.3);">
    ğŸ‘ï¸ è®¿å®¢æ¨¡å¼ Â· ä»…å¯æŸ¥çœ‹ï¼Œæ— æ³•æ“ä½œ
  </div>
  
  <!-- Custom Modal Container -->
  <div id="custom-modal-container" class="custom-modal-overlay">
    <div class="custom-modal">
      <div class="custom-modal-header">
        <div id="modal-icon" class="custom-modal-icon warning">âš ï¸</div>
        <h3 id="modal-title" class="custom-modal-title">ç¡®è®¤æ“ä½œ</h3>
      </div>
      <div id="modal-body" class="custom-modal-body">
        ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ
      </div>
      <div class="custom-modal-actions">
        <button id="modal-cancel" class="modal-btn modal-btn-cancel">å–æ¶ˆ</button>
        <button id="modal-confirm" class="modal-btn modal-btn-confirm">ç¡®å®š</button>
      </div>
    </div>
  </div>
  
  <!-- Sparkline Popover for Ping Trends -->
  <div id="sparkline-popover" class="sparkline-popover">
    <div class="sparkline-header">
      <span id="sparkline-carrier" class="sparkline-carrier">CU</span>
      <span id="sparkline-title" class="sparkline-title">24hå»¶è¿Ÿ</span>
    </div>
    <div class="sparkline-canvas-wrap">
      <canvas id="sparkline-canvas" width="196" height="50"></canvas>
    </div>
    <div class="sparkline-stats">
      <div class="stat-item current"><span class="stat-label">å½“å‰</span><span class="stat-value" id="sparkline-current">--</span></div>
      <div class="stat-item avg"><span class="stat-label">å¹³å‡</span><span class="stat-value" id="sparkline-avg">--</span></div>
      <div class="stat-item min"><span class="stat-label">æœ€ä½</span><span class="stat-value" id="sparkline-min">--</span></div>
      <div class="stat-item max"><span class="stat-label">æœ€é«˜</span><span class="stat-value" id="sparkline-max">--</span></div>
    </div>
  </div>
  <script>
    if (document.cookie.includes('guest_session=readonly')) {
      document.getElementById('guest-banner').classList.remove('hidden');
      document.body.style.paddingTop = '40px';
    }
  </script>
  <div class="radix-themes min-h-screen" data-theme="dark">
    <!-- App Layout with Sidebar -->
    <div class="app-layout">
      <!-- Sidebar Navigation -->
      <aside class="sidebar hidden" id="sidebar">
        <div class="sidebar-brand">
          <div class="sidebar-logo">ğŸ“Š</div>
          <div>
            <div class="sidebar-title">iPerf3</div>
            <div class="sidebar-subtitle">ç½‘ç»œæµ‹è¯•</div>
          </div>
        </div>
        
        <nav class="sidebar-nav">
          <div class="nav-section">
            <div class="nav-section-title">ç›‘æ§é¢æ¿</div>
            <a href="/web" class="nav-item active" data-page="dashboard">
              <span class="nav-item-icon">ğŸ </span>
              <span>èŠ‚ç‚¹æ¦‚è§ˆ</span>
            </a>
            <a href="/web/tests" class="nav-item" data-page="tests">
              <span class="nav-item-icon">ğŸš€</span>
              <span>é€Ÿåº¦æµ‹è¯•</span>
            </a>
            <a href="/web/schedules" class="nav-item" data-page="schedules">
              <span class="nav-item-icon">ğŸ“…</span>
              <span>å®šæ—¶ä»»åŠ¡</span>
            </a>
          </div>
          
          <div class="nav-section">
            <div class="nav-section-title">è·¯ç”±åˆ†æ</div>
            <a href="/web/trace" class="nav-item" data-page="trace">
              <span class="nav-item-icon">ğŸ”</span>
              <span>å•æ¬¡è¿½è¸ª</span>
            </a>
            <a href="/web/trace#schedules" class="nav-item" data-page="trace-schedules">
              <span class="nav-item-icon">ğŸ“…</span>
              <span>å®šæ—¶è¿½è¸ª</span>
            </a>
            <a href="/web/trace#compare" class="nav-item" data-page="compare">
              <span class="nav-item-icon">ğŸ“Š</span>
              <span>å¤šå…ƒå¯¹æ¯”</span>
            </a>
            <a href="/web/trace#history" class="nav-item" data-page="history">
              <span class="nav-item-icon">ğŸ“œ</span>
              <span>å†å²è®°å½•</span>
            </a>
          </div>
          
          <div class="nav-section guest-hide">
            <div class="nav-section-title">ç³»ç»Ÿè®¾ç½®</div>
            <a href="/web/redis" class="nav-item" data-page="redis">
              <span class="nav-item-icon">ğŸ“Š</span>
              <span>Redis ç›‘æ§</span>
            </a>
            <a href="/web/whitelist" class="nav-item" data-page="whitelist">
              <span class="nav-item-icon">ğŸ›¡ï¸</span>
              <span>ç™½åå•ç®¡ç†</span>
            </a>
            <a href="javascript:void(0)" onclick="openSettingsTab('password')" class="nav-item">
              <span class="nav-item-icon">ğŸ”</span>
              <span>ä¿®æ”¹å¯†ç </span>
            </a>
            <a href="javascript:void(0)" onclick="openSettingsTab('telegram')" class="nav-item">
              <span class="nav-item-icon">ğŸ“±</span>
              <span>Telegram å‘Šè­¦</span>
            </a>
            <a href="javascript:void(0)" onclick="openSettingsTab('admin')" class="nav-item">
              <span class="nav-item-icon">ğŸ—„ï¸</span>
              <span>æ•°æ®åº“ç®¡ç†</span>
            </a>
          </div>
        </nav>
        
        <div class="sidebar-footer">
          <div class="sidebar-user">
            <div class="sidebar-avatar" id="sidebar-avatar">A</div>
            <div class="sidebar-user-info">
              <div class="sidebar-user-name" id="sidebar-username">ç®¡ç†å‘˜</div>
              <div class="sidebar-user-role" id="sidebar-role">å·²ç™»å½•</div>
            </div>
          </div>
          <!-- Theme Toggle in Sidebar -->
          <button onclick="toggleTheme()" class="theme-toggle" style="margin-top: 0.75rem; width: 100%;">
            <span class="theme-toggle-icon">ğŸŒ™</span>
            <span class="theme-toggle-track"></span>
          </button>
          <!-- Logout Button -->
          <button onclick="logout()" class="nav-item" style="margin-top: 0.5rem; width: 100%; justify-content: center; color: #f87171; border: 1px solid rgba(248, 113, 113, 0.3); background: rgba(248, 113, 113, 0.1);">
            <span class="nav-item-icon">ğŸšª</span>
            <span>é€€å‡ºç™»å½•</span>
          </button>
        </div>
      </aside>
      
      <!-- Sidebar Overlay for Mobile -->
      <div class="sidebar-overlay hidden" id="sidebar-overlay" onclick="closeSidebar()"></div>
      
      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn hidden" id="mobile-menu-btn" onclick="toggleSidebar()">â˜°</button>
      
      <!-- Main Content Area -->
      <main class="main-content">
        <div class="page-frame">
          <div class="page-content">

            <div class="card-stack">
          <div class="login-container hidden" id="login-card">
            <div class="glass-panel login-card">
              <!-- Logo Icon -->
              <div class="login-logo">
                <div class="login-logo-icon">ğŸ“Š</div>
              </div>
              
              <h1 class="login-title">iPerf3 ç½‘ç»œæµ‹è¯•</h1>
              <p class="login-subtitle">åˆ†å¸ƒå¼ç½‘ç»œæ€§èƒ½ç›‘æ§ Â· èŠ‚ç‚¹äº’æµ‹ Â· è·¯ç”±è¿½è¸ª</p>
              
              <div id="login-alert" class="alert alert-error hidden"></div>

              <form id="login-form">
                <div class="form-group">
                  <input id="password-input" class="form-input" type="password" placeholder="è¯·è¾“å…¥è®¿é—®å¯†ç " autocomplete="current-password" required />
                </div>
                <button id="login-btn" type="button" class="btn-primary">
                  <span>ç™»å½•æ§åˆ¶å°</span>
                </button>
                <button id="guest-login-btn" type="button" class="btn-primary" style="background: linear-gradient(135deg, #475569 0%, #334155 100%); margin-top: 0.75rem;">
                  <span>ğŸ‘¤</span> è®¿å®¢æ¨¡å¼
                </button>
              </form>
              
              <!-- Divider -->
              <div class="login-divider">é¡¹ç›®ä¿¡æ¯</div>
              
              <!-- GitHub Badges & Project Info -->
              <div class="login-footer">
                <div class="github-badges">
                  <a href="https://github.com/podcctv/iperf3-test-tools" target="_blank" rel="noopener noreferrer">
                    <img src="https://img.shields.io/github/stars/podcctv/iperf3-test-tools?style=for-the-badge&logo=github&logoColor=white&color=3b82f6" alt="Stars" />
                  </a>
                  <a href="https://github.com/podcctv/iperf3-test-tools/issues" target="_blank" rel="noopener noreferrer">
                    <img src="https://img.shields.io/github/issues/podcctv/iperf3-test-tools?style=for-the-badge&logo=github&logoColor=white&color=10b981" alt="Issues" />
                  </a>
                  <a href="https://github.com/podcctv/iperf3-test-tools/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">
                    <img src="https://img.shields.io/github/license/podcctv/iperf3-test-tools?style=for-the-badge&logo=opensourceinitiative&logoColor=white&color=8b5cf6" alt="License" />
                  </a>
                  <a href="https://github.com/podcctv/iperf3-test-tools" target="_blank" rel="noopener noreferrer">
                    <img src="https://img.shields.io/badge/Docker-Ready-2496ED?style=for-the-badge&logo=docker&logoColor=white" alt="Docker" />
                  </a>
                </div>
                <p class="login-copyright">
                  <a href="https://github.com/podcctv/iperf3-test-tools" target="_blank" rel="noopener noreferrer">iPerf3 åˆ†å¸ƒå¼ç½‘ç»œæµ‹è¯•å·¥å…·</a>
                  <br />
                  Â© 2024-2025 Â· Made with â¤ï¸ by <a href="https://github.com/podcctv" target="_blank" rel="noopener noreferrer" class="author">@podcctv</a>
                </p>
              </div>
            </div>
          </div>

          <div id="app-card" class="hidden space-y-6 app-card">
            <!-- Dashboard Header -->
            <div class="dashboard-header flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
              <div class="flex items-center gap-4">
                <div class="login-logo-icon" style="width: 56px; height: 56px; font-size: 1.5rem;">ğŸ“Š</div>
                <div>
                  <p class="dashboard-label">èŠ‚ç‚¹ç›‘æ§ä¸­å¿ƒ</p>
                  <h2 class="dashboard-title">iPerf3 ç½‘ç»œæµ‹è¯•</h2>
                  <p class="dashboard-subtitle" id="auth-hint">å®æ—¶ç›‘æ§å…¨ç½‘èŠ‚ç‚¹è¿é€šæ€§ã€ä¸‰ç½‘å»¶è¿ŸåŠæµåª’ä½“è§£é”çŠ¶æ€</p>
                </div>
              </div>
              <!-- å¯¼èˆªå·²æ•´åˆåˆ°ä¾§è¾¹æ ï¼Œéšè—çš„é€€å‡ºæŒ‰é’®ä¾›JSè°ƒç”¨ -->
              <button id="logout-btn" class="hidden">é€€å‡ºç™»å½•</button>
            </div>

            <div class="space-y-4">
              <div class="panel-card rounded-2xl p-5 space-y-4">
                <div class="flex flex-wrap items-center justify-between gap-3">
                  <div>
                    <h3 class="text-lg font-semibold text-white">åœ¨çº¿èŠ‚ç‚¹</h3>
                    <p class="text-sm text-slate-400">å®æ—¶ç›‘æ§èŠ‚ç‚¹è¿é€šæ€§ã€å»¶è¿ŸåŠæµåª’ä½“è§£é”</p>
                  </div>
                  <div class="flex flex-wrap gap-2">
                    <button data-refresh-nodes onclick="refreshNodes()" class="rounded-lg border border-slate-700 bg-slate-800/60 px-4 py-2 text-sm font-semibold text-slate-100 shadow-sm transition hover:border-sky-500 hover:text-sky-200">åˆ·æ–°</button>
                    <button id="open-add-node" class="guest-hide rounded-lg border border-emerald-500/40 bg-emerald-500/15 px-4 py-2 text-sm font-semibold text-emerald-100 shadow-sm transition hover:bg-emerald-500/25">æ·»åŠ èŠ‚ç‚¹</button>
                  </div>
                </div>
                <div id="streaming-progress" class="hidden space-y-2 rounded-xl border border-slate-800 bg-slate-900/50 p-3">
                  <div class="flex items-center justify-between text-xs text-slate-400">
                    <span>æµåª’ä½“è§£é”æ£€æµ‹</span>
                    <span id="streaming-progress-label" class="font-medium text-slate-200"></span>
                  </div>
                  <div class="h-2 w-full rounded-full bg-slate-800/80">
                    <div id="streaming-progress-bar" class="h-2 w-0 rounded-full bg-gradient-to-r from-emerald-500 to-sky-500 transition-all duration-300"></div>
                  </div>
                </div>
                <div id="nodes-list" class="text-sm text-slate-400 space-y-3">
                  <!-- Skeleton loading state -->
                  <div class="nodes-skeleton grid gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                    <div class="animate-pulse rounded-xl border border-slate-800 bg-slate-900/60 p-4">
                      <div class="flex items-center gap-3 mb-3">
                        <div class="h-3 w-3 rounded-full bg-slate-700"></div>
                        <div class="h-4 w-24 rounded bg-slate-700"></div>
                      </div>
                      <div class="h-8 w-16 rounded bg-slate-700 mb-2"></div>
                      <div class="h-3 w-20 rounded bg-slate-700"></div>
                    </div>
                    <div class="animate-pulse rounded-xl border border-slate-800 bg-slate-900/60 p-4">
                      <div class="flex items-center gap-3 mb-3">
                        <div class="h-3 w-3 rounded-full bg-slate-700"></div>
                        <div class="h-4 w-20 rounded bg-slate-700"></div>
                      </div>
                      <div class="h-8 w-16 rounded bg-slate-700 mb-2"></div>
                      <div class="h-3 w-20 rounded bg-slate-700"></div>
                    </div>
                    <div class="animate-pulse rounded-xl border border-slate-800 bg-slate-900/60 p-4 hidden sm:block">
                      <div class="flex items-center gap-3 mb-3">
                        <div class="h-3 w-3 rounded-full bg-slate-700"></div>
                        <div class="h-4 w-28 rounded bg-slate-700"></div>
                      </div>
                      <div class="h-8 w-16 rounded bg-slate-700 mb-2"></div>
                      <div class="h-3 w-20 rounded bg-slate-700"></div>
                    </div>
                    <div class="animate-pulse rounded-xl border border-slate-800 bg-slate-900/60 p-4 hidden lg:block">
                      <div class="flex items-center gap-3 mb-3">
                        <div class="h-3 w-3 rounded-full bg-slate-700"></div>
                        <div class="h-4 w-24 rounded bg-slate-700"></div>
                      </div>
                      <div class="h-8 w-16 rounded bg-slate-700 mb-2"></div>
                      <div class="h-3 w-20 rounded bg-slate-700"></div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Test Plan Panel - hidden on main page, shown on /web/tests -->
              <div id="test-plan-panel" class="panel-card rounded-2xl p-5 space-y-4 hidden">
                <div class="flex flex-wrap items-center justify-between gap-3">
                  <div>
                    <p class="text-xs uppercase tracking-[0.2em] text-sky-300/70">IPERF3 æµ‹è¯•</p>
                    <h3 class="text-lg font-semibold text-white">æµ‹è¯•è®¡åˆ’</h3>
                  </div>
                  <div class="inline-flex items-center gap-2 rounded-full border border-slate-700/70 bg-slate-900/70 p-1 shadow-inner shadow-black/20">
                    <button id="single-test-tab" class="rounded-full bg-gradient-to-r from-sky-500/80 to-indigo-500/80 px-4 py-1.5 text-xs font-semibold text-slate-50 shadow-lg shadow-sky-500/15 ring-1 ring-sky-400/40 transition hover:brightness-110">å•ç¨‹æµ‹è¯•</button>
                    <button id="suite-test-tab" class="rounded-full px-4 py-1.5 text-xs font-semibold text-slate-300 transition hover:text-white">åŒå‘ TCP/UDP æµ‹è¯•</button>
                  </div>
                </div>
                <p id="test-panel-intro" class="text-sm text-slate-400">å¿«é€Ÿè§„åˆ’ iperf3 å•ç¨‹æˆ–åŒå‘é“¾è·¯æµ‹è¯•ï¼Œæ”¯æŒé™é€Ÿã€å¹¶è¡Œä¸åå‘ (-R)ã€‚</p>
                <div id="test-alert" class="hidden rounded-xl border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-sm text-rose-100"></div>

                <div id="single-test-panel" class="space-y-4">
                  <div class="grid gap-3 sm:grid-cols-2">
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">æºèŠ‚ç‚¹</label>
                      <select id="src-select" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60"></select>
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">ç›®æ ‡èŠ‚ç‚¹</label>
                      <select id="dst-select" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60"></select>
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">åè®®</label>
                      <select id="protocol" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60"><option value="tcp">TCP</option><option value="udp">UDP</option></select>
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">æ—¶é•¿ï¼ˆç§’ï¼‰</label>
                      <input id="duration" type="number" value="10" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">å¹¶è¡Œæ•°</label>
                      <input id="parallel" type="number" value="1" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2 hidden">
                      <label class="text-sm font-medium text-slate-200">ç«¯å£</label>
                      <input id="test-port" type="number" value="62001" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">å¿½ç•¥å‰ï¼ˆç§’ï¼‰</label>
                      <input id="omit" type="number" value="0" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                  </div>
                  <div id="tcp-options" class="grid gap-3 sm:grid-cols-2">
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">TCP é™é€Ÿå¸¦å®½ (-bï¼Œå¯é€‰)</label>
                      <input id="tcp-bandwidth" type="text" placeholder="ä¾‹å¦‚ 0ï¼ˆä¸é™ï¼‰æˆ– 500M" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                  </div>
                  <div id="udp-options" class="hidden grid gap-3 sm:grid-cols-3">
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">UDP å¸¦å®½ (-b)</label>
                      <input id="udp-bandwidth" type="text" value="100M" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">UDP åŒ…é•¿ (-l)</label>
                      <input id="udp-len" type="number" value="1400" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">UDP å¤‡æ³¨</label>
                      <p class="rounded-xl border border-slate-800 bg-slate-900/40 px-3 py-2 text-xs text-slate-400">é»˜è®¤ 100M/1400Bï¼Œå¯æ ¹æ®é“¾è·¯å®¹é‡è°ƒæ•´ã€‚</p>
                    </div>
                  </div>
                  <div class="flex items-center justify-between gap-3 rounded-xl border border-slate-800 bg-slate-900/50 px-3 py-2">
                    <label for="reverse" class="flex items-center gap-2 text-sm font-medium text-slate-200">
                      <input id="reverse" type="checkbox" class="h-4 w-4 rounded border-slate-600 bg-slate-900 text-sky-500 focus:ring-sky-500" />
                      åå‘æµ‹è¯• (-R)
                    </label>
                    <p class="text-xs text-slate-500">åœ¨æºèŠ‚ç‚¹ä¸Šå‘èµ·åå‘æµé‡æµ‹è¯•ã€‚</p>
                  </div>
                  <button id="run-test" class="w-full rounded-xl bg-gradient-to-r from-sky-500 to-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/20 transition hover:scale-[1.01] hover:shadow-xl">å¼€å§‹æµ‹è¯•</button>
                </div>

                <div id="suite-test-panel" class="hidden space-y-4">
                  <p class="text-sm text-slate-400">ä¸€é”®å®Œæˆ TCP/UDP å»å›å››é¡¹æµ‹è¯•ï¼Œé€‚åˆåŸºçº¿éªŒè¯ä¸è·¨è¿è¥å•†é“¾è·¯å¯¹æ¯”ã€‚</p>
                  <div class="grid gap-3 sm:grid-cols-2">
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">æºèŠ‚ç‚¹</label>
                      <select id="suite-src-select" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60"></select>
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">ç›®æ ‡èŠ‚ç‚¹</label>
                      <select id="suite-dst-select" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60"></select>
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">æ—¶é•¿ï¼ˆç§’ï¼‰</label>
                      <input id="suite-duration" type="number" value="10" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">å¹¶è¡Œæ•° (P)</label>
                      <input id="suite-parallel" type="number" value="1" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2 hidden">
                      <label class="text-sm font-medium text-slate-200">ç«¯å£</label>
                      <input id="suite-port" type="number" value="62001" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">å¿½ç•¥å‰ï¼ˆç§’ï¼‰</label>
                      <input id="suite-omit" type="number" value="0" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                  </div>
                  <div class="grid gap-3 sm:grid-cols-3">
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">TCP é™é€Ÿ (-bï¼Œå¯é€‰)</label>
                      <input id="suite-tcp-bandwidth" type="text" placeholder="ä¾‹å¦‚ 0 æˆ– 500M" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">UDP å¸¦å®½ (-b)</label>
                      <input id="suite-udp-bandwidth" type="text" value="100M" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                    <div class="space-y-2">
                      <label class="text-sm font-medium text-slate-200">UDP åŒ…é•¿ (-l)</label>
                      <input id="suite-udp-len" type="number" value="1400" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
                    </div>
                  </div>
                  <button id="run-suite-test" class="w-full rounded-xl bg-gradient-to-r from-emerald-500 to-cyan-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/20 transition hover:scale-[1.01] hover:shadow-xl">å¯åŠ¨åŒå‘æµ‹è¯•</button>
                </div>

                <div id="test-progress" class="hidden space-y-2">
                  <div class="flex items-center justify-between text-xs text-slate-400">
                    <span>é“¾è·¯æµ‹è¯•è¿›åº¦</span>
                    <span id="test-progress-label" class="font-medium text-slate-200"></span>
                  </div>
                  <div class="h-2 w-full rounded-full bg-slate-800/80">
                    <div id="test-progress-bar" class="h-2 w-0 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 transition-all duration-300"></div>
                  </div>
                </div>
              </div>

              <!-- Recent Tests Panel - hidden on main page, shown on /web/tests -->
              <div id="recent-tests-panel" class="panel-card rounded-2xl p-5 space-y-4 hidden">
                <div class="flex flex-wrap items-center justify-between gap-3">
                  <div>
                    <h3 class="text-lg font-semibold text-white">æœ€è¿‘æµ‹è¯•</h3>
                    <p class="text-sm text-slate-400">æŒ‰æ—¶é—´å€’åºå±•ç¤ºï¼Œå¯å±•å¼€æŸ¥çœ‹åŸå§‹è¾“å‡ºã€‚</p>
                  </div>
                  <div class="flex flex-wrap items-center gap-2">
                    <select id="tests-page-size" class="rounded-lg border border-slate-700 bg-slate-800/60 px-3 py-2 text-sm text-slate-100">
                      <option value="5">5 æ¡/é¡µ</option>
                      <option value="10" selected>10 æ¡/é¡µ</option>
                      <option value="20">20 æ¡/é¡µ</option>
                      <option value="50">50 æ¡/é¡µ</option>
                    </select>
                    <button id="refresh-tests" class="rounded-lg border border-slate-700 bg-slate-800/60 px-4 py-2 text-sm font-semibold text-slate-100 shadow-sm transition hover:border-sky-500 hover:text-sky-200">åˆ·æ–°</button>
                    <button id="delete-all-tests" class="rounded-lg border border-rose-500/40 bg-rose-500/15 px-4 py-2 text-sm font-semibold text-rose-100 shadow-sm transition hover:bg-rose-500/25">æ¸…ç©ºè®°å½•</button>
                  </div>
                </div>
                <div id="tests-list" class="text-sm text-slate-400 space-y-3">æš‚æ— æµ‹è¯•è®°å½•ã€‚</div>
                <!-- Pagination Controls -->
                <div id="tests-pagination" class="flex flex-wrap items-center justify-center gap-2 pt-4 hidden">
                  <button id="tests-prev" class="rounded-lg border border-slate-700 bg-slate-800/60 px-3 py-1.5 text-sm font-medium text-slate-300 transition hover:border-sky-500 hover:text-sky-200 disabled:opacity-40 disabled:cursor-not-allowed">Â« ä¸Šä¸€é¡µ</button>
                  <span id="tests-page-info" class="text-sm text-slate-400 px-3">ç¬¬ 1 é¡µ / å…± 1 é¡µ</span>
                  <button id="tests-next" class="rounded-lg border border-slate-700 bg-slate-800/60 px-3 py-1.5 text-sm font-medium text-slate-300 transition hover:border-sky-500 hover:text-sky-200 disabled:opacity-40 disabled:cursor-not-allowed">ä¸‹ä¸€é¡µ Â»</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="add-node-modal" class="fixed inset-0 z-40 hidden items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur">
    <div class="relative w-full max-w-xl rounded-3xl border border-slate-800 bg-slate-900/80 p-6 shadow-2xl shadow-black/40">
      <button id="close-add-node" class="absolute right-4 top-4 rounded-full border border-slate-700/80 bg-slate-800/80 p-2 text-slate-300 transition hover:bg-slate-700/80">âœ•</button>
      <div class="mb-4 flex items-center justify-between gap-2">
        <div>
          <p class="text-xs uppercase tracking-[0.2em] text-sky-300/80">Agent æ³¨å†Œè¡¨</p>
          <h3 id="add-node-title" class="text-xl font-semibold text-white">æ·»åŠ èŠ‚ç‚¹</h3>
        </div>
        <span class="rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-200 ring-1 ring-emerald-500/40">æœ¬åœ°å¼¹çª—</span>
      </div>
      <div id="add-node-alert" class="hidden rounded-xl border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-sm text-rose-100"></div>
      <div class="grid gap-3 sm:grid-cols-2">
        <div class="space-y-2">
          <label class="text-sm font-medium text-slate-200">åç§°</label>
          <input id="node-name" placeholder="node-a" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
        </div>
        <div class="space-y-2">
          <label class="text-sm font-medium text-slate-200">IP åœ°å€</label>
          <input id="node-ip" placeholder="10.0.0.11" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
        </div>
        <div class="space-y-2">
          <label class="text-sm font-medium text-slate-200">Agent ç«¯å£</label>
          <input id="node-port" type="number" value="8000" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
        </div>
        <div class="space-y-2">
          <label class="text-sm font-medium text-slate-200">iperf ç«¯å£</label>
          <input id="node-iperf-port" type="number" value="62001" class="rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60" />
        </div>
      </div>
      <div class="mt-3 space-y-2">
        <label class="text-sm font-medium text-slate-200">æè¿°ï¼ˆå¯é€‰ï¼‰</label>
        <textarea id="node-desc" rows="2" class="w-full rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/60"></textarea>
      </div>
      <div class="mt-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end">
        <button id="cancel-add-node" class="w-full sm:w-auto rounded-xl border border-slate-700 bg-slate-800/80 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-slate-500">å–æ¶ˆ</button>
        <button id="save-node" class="w-full sm:w-auto rounded-xl bg-gradient-to-r from-emerald-500 to-sky-500 px-4 py-3 text-sm font-semibold text-slate-950 shadow-lg shadow-emerald-500/20 transition hover:scale-[1.01] hover:shadow-xl">ä¿å­˜èŠ‚ç‚¹</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="fixed inset-0 z-40 hidden items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur overflow-y-auto">
    <div class="relative w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-3xl border border-slate-800 bg-slate-900/80 p-6 shadow-2xl shadow-black/40 my-auto">
      <button id="close-settings" onclick="toggleSettingsModal(false)" class="sticky top-0 right-0 float-right rounded-full border border-slate-700/80 bg-slate-800/80 p-2 text-slate-300 transition hover:bg-slate-700/80 z-10 mb-2">âœ•</button>
      
      <div class="mb-6 flex items-center justify-between gap-2 pr-12">
        <div>
          <p class="text-xs uppercase tracking-[0.2em] text-indigo-300/80">æ•°æ®åº“ç®¡ç†</p>
          <h3 class="text-2xl font-semibold text-white">è®¾ç½®</h3>
        </div>
      </div>

      <!-- Tab Navigation -->
      <div class="mb-6 inline-flex items-center gap-2 rounded-full border border-slate-700/70 bg-slate-900/70 p-1 shadow-inner shadow-black/20">
        <button id="password-tab" onclick="setActiveSettingsTab('password')" class="rounded-full bg-gradient-to-r from-indigo-500/80 to-purple-500/80 px-4 py-2 text-sm font-semibold text-slate-50 shadow-lg shadow-indigo-500/15 ring-1 ring-indigo-400/40 transition hover:brightness-110">
          ğŸ” å¯†ç ç®¡ç†
        </button>
        <button id="config-tab" onclick="setActiveSettingsTab('config')" class="rounded-full px-4 py-2 text-sm font-semibold text-slate-300 transition hover:text-white">
          ğŸ“¦ é…ç½®ç®¡ç†
        </button>
        <button id="telegram-tab" onclick="setActiveSettingsTab('telegram')" class="rounded-full px-4 py-2 text-sm font-semibold text-slate-300 transition hover:text-white">
          ğŸ¤– Telegram
        </button>
        <button id="admin-tab" onclick="setActiveSettingsTab('admin')" class="rounded-full px-4 py-2 text-sm font-semibold text-slate-300 transition hover:text-white">
          ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†
        </button>
      </div>

      <!-- Password Management Panel -->
      <div id="password-panel" class="space-y-4">
        <div class="rounded-xl border border-slate-800/60 bg-slate-950/40 p-4">
          <h4 class="mb-3 text-lg font-semibold text-white">ä¿®æ”¹å¯†ç </h4>
          <p class="mb-4 text-sm text-slate-400">æ›´æ–°æ‚¨çš„è®¿é—®å¯†ç ä»¥ä¿æŠ¤ç³»ç»Ÿå®‰å…¨ã€‚</p>
          
          <div id="change-password-alert" class="alert hidden mb-4"></div>
          
          <div class="grid gap-4 md:grid-cols-3">
            <div class="space-y-2">
              <label class="text-xs font-semibold text-slate-300" for="current-password">å½“å‰å¯†ç </label>
              <input id="current-password" type="password" class="form-input" placeholder="Current Password" />
            </div>
            <div class="space-y-2">
              <label class="text-xs font-semibold text-slate-300" for="new-password">æ–°å¯†ç </label>
              <input id="new-password" type="password" class="form-input" placeholder="æœ€å°‘ 6 ä½" />
            </div>
            <div class="space-y-2">
              <label class="text-xs font-semibold text-slate-300" for="confirm-password">ç¡®è®¤æ–°å¯†ç </label>
              <input id="confirm-password" type="password" class="form-input" placeholder="å†æ¬¡è¾“å…¥" />
            </div>
          </div>
          
          <div class="mt-4 flex justify-end">
            <button id="change-password-btn" onclick="changePassword()" class="rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 px-6 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/20 transition hover:scale-[1.02] hover:shadow-xl">
              æ›´æ–°å¯†ç 
            </button>
          </div>
        </div>
      </div>

      <!-- Config Management Panel -->
      <div id="config-panel" class="hidden space-y-4">
        <div class="rounded-xl border border-slate-800/60 bg-slate-950/40 p-4">
          <h4 class="mb-3 text-lg font-semibold text-white">ä»£ç†é…ç½®æ–‡ä»¶</h4>
          <p class="mb-4 text-sm text-slate-400">å¯¼å…¥æˆ–å¯¼å‡º agent_configs.jsonï¼Œä¾¿äºåœ¨ä¸åŒå®ä¾‹ä¹‹é—´è¿ç§»é…ç½®ã€‚</p>
          
          <div id="config-alert" class="hidden mb-4 rounded-xl border border-slate-700 bg-slate-800/60 px-4 py-3 text-sm text-slate-100"></div>
          
          <input id="config-file-input" type="file" accept="application/json" class="hidden" onchange="if(this.files[0]) { importAgentConfigs(this.files[0]); this.value=''; }" />
          
          <div class="flex flex-wrap items-center gap-3">
            <button id="export-configs" onclick="exportAgentConfigs()" class="rounded-xl border border-slate-700 bg-slate-800/60 px-5 py-2.5 text-sm font-semibold text-slate-100 shadow-sm transition hover:border-sky-500 hover:text-sky-200 inline-flex items-center gap-2">
              <span>ğŸ“¤</span>
              <span>å¯¼å‡ºé…ç½®</span>
            </button>
            <button id="import-configs" onclick="document.getElementById('config-file-input').click()" class="rounded-xl border border-sky-500/40 bg-sky-500/15 px-5 py-2.5 text-sm font-semibold text-sky-100 shadow-sm transition hover:bg-sky-500/25 inline-flex items-center gap-2">
              <span>ğŸ“¥</span>
              <span>å¯¼å…¥é…ç½®</span>
            </button>
          </div>
          
          <p class="mt-4 text-xs text-slate-500">ğŸ’¡ æç¤º: é…ç½®æ–‡ä»¶åŒ…å«æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¯ç”¨äºå¤‡ä»½æˆ–è¿ç§»åˆ°å…¶ä»–æœåŠ¡å™¨ã€‚</p>
        </div>
      </div>

      <!-- Admin Management Panel -->
      <div id="admin-panel" class="hidden space-y-4">
        <div class="rounded-xl border border-slate-800/60 bg-slate-950/40 p-4">
          <h4 class="mb-3 text-lg font-semibold text-white">ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†</h4>
          <p class="mb-4 text-sm text-slate-400">æ¸…ç©ºæµ‹è¯•æ•°æ®ã€‚<span class="text-rose-400 font-semibold">èŠ‚ç‚¹é…ç½®å’Œå®šæ—¶ä»»åŠ¡è®¾ç½®ä¸ä¼šè¢«åˆ é™¤ã€‚</span></p>
          
          <div id="admin-alert" class="hidden mb-4 rounded-xl px-4 py-3 text-sm"></div>
          
          <div class="grid gap-3 md:grid-cols-2">
            <button onclick="clearAllTestData()" class="rounded-xl bg-rose-600 hover:bg-rose-500 px-5 py-3 text-sm font-semibold text-white shadow-lg transition">
              ğŸ§¹ æ¸…ç©ºæ‰€æœ‰æµ‹è¯•æ•°æ®
            </button>
            <button onclick="clearScheduleResults()" class="rounded-xl bg-amber-600 hover:bg-amber-500 px-5 py-3 text-sm font-semibold text-white shadow-lg transition">
              ğŸ“Š ä»…æ¸…ç©ºå®šæ—¶ä»»åŠ¡å†å²
            </button>
          </div>
        </div>
        
      </div>

      <!-- Telegram Settings Panel -->
      <div id="telegram-panel" class="hidden space-y-4">
        <div class="rounded-xl border border-slate-800/60 bg-slate-950/40 p-4">
          <h4 class="mb-3 text-lg font-semibold text-white">ğŸ“± Telegram æœºå™¨äººè®¾ç½®</h4>
          <p class="mb-4 text-sm text-slate-400">é…ç½® Telegram æœºå™¨äººä»¥æ¥æ”¶å‘Šè­¦æ¨é€é€šçŸ¥ã€‚</p>
          
          <div id="telegram-alert" class="alert hidden mb-4"></div>
          
          <div class="grid gap-4 md:grid-cols-2">
            <div class="space-y-2">
              <label class="text-xs font-semibold text-slate-300">Bot Token</label>
              <input id="telegram-bot-token" type="password" class="form-input" placeholder="ä¾‹å¦‚: 123456789:ABCdefGHI..." />
              <p class="text-xs text-slate-500">ä» @BotFather è·å–</p>
            </div>
            <div class="space-y-2">
              <label class="text-xs font-semibold text-slate-300">Chat ID</label>
              <input id="telegram-chat-id" type="text" class="form-input" placeholder="ä¾‹å¦‚: -100123456789" />
              <p class="text-xs text-slate-500">ç¾¤ç»„æˆ–é¢‘é“IDï¼Œä¸ªäººä½¿ç”¨ä½ çš„User ID</p>
            </div>
          </div>
          
          <div class="mt-4 flex justify-end gap-2">
            <button onclick="testTelegramConfig()" class="rounded-xl border border-slate-700 bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-sky-500">
              ğŸ”” å‘é€æµ‹è¯•æ¶ˆæ¯
            </button>
            <button onclick="saveTelegramConfig()" class="rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 px-6 py-2 text-sm font-semibold text-white shadow-lg transition hover:scale-[1.02]">
              ä¿å­˜è®¾ç½®
            </button>
          </div>
        </div>
        
        <div class="rounded-xl border border-slate-800/60 bg-slate-950/40 p-4">
          <h4 class="mb-3 text-lg font-semibold text-white">ğŸ”” é€šçŸ¥ç±»å‹</h4>
          <p class="mb-4 text-sm text-slate-400">é€‰æ‹©éœ€è¦æ¨é€çš„é€šçŸ¥ç±»å‹ã€‚</p>
          
          <div class="grid gap-3 md:grid-cols-2">
            <label class="flex items-center gap-3 rounded-lg border border-slate-700 bg-slate-800/50 p-3 cursor-pointer hover:border-slate-600 transition">
              <input type="checkbox" id="notify-route-change" class="form-checkbox" checked>
              <div>
                <span class="font-semibold text-white">ğŸ›¤ï¸ è·¯ç”±å˜åŒ–å‘Šè­¦</span>
                <p class="text-xs text-slate-400">å®šæ—¶æ£€æµ‹çš„è·¯ç”±å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥</p>
              </div>
            </label>
            <label class="flex items-center gap-3 rounded-lg border border-slate-700 bg-slate-800/50 p-3 cursor-pointer hover:border-slate-600 transition">
              <input type="checkbox" id="notify-schedule-failure" class="form-checkbox">
              <div>
                <span class="font-semibold text-white">âš ï¸ å®šæ—¶ä»»åŠ¡å¤±è´¥</span>
                <p class="text-xs text-slate-400">å®šæ—¶ä»»åŠ¡æ‰§è¡Œå¤±è´¥æ—¶é€šçŸ¥</p>
              </div>
            </label>
            <label class="flex items-center gap-3 rounded-lg border border-slate-700 bg-slate-800/50 p-3 cursor-pointer hover:border-slate-600 transition">
              <input type="checkbox" id="notify-node-offline" class="form-checkbox">
              <div>
                <span class="font-semibold text-white">ğŸ”Œ èŠ‚ç‚¹ç¦»çº¿</span>
                <p class="text-xs text-slate-400">æ£€æµ‹åˆ°AgentèŠ‚ç‚¹ç¦»çº¿æ—¶é€šçŸ¥</p>
              </div>
            </label>
            <label class="flex items-center gap-3 rounded-lg border border-slate-700 bg-slate-800/50 p-3 cursor-pointer hover:border-slate-600 transition">
              <input type="checkbox" id="notify-ping-high" class="form-checkbox">
              <div>
                <span class="font-semibold text-white">ğŸ“¶ é«˜å»¶è¿Ÿå‘Šè­¦</span>
                <p class="text-xs text-slate-400">Pingå»¶è¿Ÿè¶…è¿‡é˜ˆå€¼æ—¶é€šçŸ¥</p>
              </div>
            </label>
            <label class="flex items-center gap-3 rounded-lg border border-slate-700 bg-slate-800/50 p-3 cursor-pointer hover:border-slate-600 transition">
              <input type="checkbox" id="notify-daily-report" class="form-checkbox">
              <div>
                <span class="font-semibold text-white">ğŸ“Š æ¯æ—¥æŠ¥å‘Š</span>
                <p class="text-xs text-slate-400">æ¯å¤©å‘é€æµ‹è¯•ç»Ÿè®¡æ‘˜è¦</p>
              </div>
            </label>
          </div>
        </div>
        
        <!-- Threshold Configuration -->
        <div class="rounded-xl border border-slate-800/60 bg-slate-950/40 p-4">
          <h4 class="mb-3 text-lg font-semibold text-white">âš™ï¸ å‘Šè­¦é˜ˆå€¼</h4>
          <p class="mb-4 text-sm text-slate-400">è‡ªå®šä¹‰è§¦å‘å‘Šè­¦çš„é˜ˆå€¼ã€‚</p>
          
          <div class="grid gap-4 md:grid-cols-2">
            <div class="space-y-2">
              <label class="text-xs font-semibold text-slate-300">é«˜å»¶è¿Ÿé˜ˆå€¼ (ms)</label>
              <input id="threshold-ping-high" type="number" class="form-input" value="500" min="50" max="5000" step="50" />
              <p class="text-xs text-slate-500">Ping å»¶è¿Ÿè¶…è¿‡æ­¤å€¼æ—¶è§¦å‘å‘Šè­¦</p>
            </div>
            <div class="space-y-2">
              <label class="text-xs font-semibold text-slate-300">å‘Šè­¦å†·å´æ—¶é—´ (åˆ†é’Ÿ)</label>
              <input id="threshold-cooldown" type="number" class="form-input" value="5" min="1" max="60" />
              <p class="text-xs text-slate-500">åŒç±»å‘Šè­¦çš„æœ€å°é—´éš”æ—¶é—´</p>
            </div>
          </div>
        </div>
        
        <!-- Node Selection -->
        <div class="rounded-xl border border-slate-800/60 bg-slate-950/40 p-4">
          <h4 class="mb-3 text-lg font-semibold text-white">ğŸ“ ç›‘æ§èŠ‚ç‚¹</h4>
          <p class="mb-4 text-sm text-slate-400">é€‰æ‹©éœ€è¦æ¥æ”¶å‘Šè­¦çš„èŠ‚ç‚¹ã€‚</p>
          
          <div class="mb-3 flex items-center gap-3">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="alert-node-scope" id="alert-all-nodes" value="all" class="form-radio" checked onchange="toggleNodeSelection()" />
              <span class="text-sm text-slate-200">æ‰€æœ‰èŠ‚ç‚¹</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="alert-node-scope" id="alert-selected-nodes" value="selected" class="form-radio" onchange="toggleNodeSelection()" />
              <span class="text-sm text-slate-200">ä»…é€‰ä¸­èŠ‚ç‚¹</span>
            </label>
          </div>
          
          <div id="node-selection-list" class="hidden grid gap-2 max-h-48 overflow-y-auto rounded-lg border border-slate-700 bg-slate-900/50 p-3">
            <!-- Populated by JS -->
            <div class="text-slate-500 text-sm">åŠ è½½èŠ‚ç‚¹åˆ—è¡¨ä¸­...</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Traceroute Modal -->
  <div id="traceroute-modal" class="fixed inset-0 z-40 hidden items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur">
    <div class="relative w-full max-w-2xl rounded-3xl border border-slate-800 bg-slate-900/80 p-6 shadow-2xl shadow-black/40">
      <button onclick="toggleTracerouteModal(false)" class="absolute right-4 top-4 rounded-full border border-slate-700/80 bg-slate-800/80 p-2 text-slate-300 transition hover:bg-slate-700/80 z-10">âœ•</button>
      
      <div class="mb-6 flex items-center justify-between gap-2 pr-12">
        <div>
          <p class="text-xs uppercase tracking-[0.2em] text-cyan-300/80">ç½‘ç»œè¯Šæ–­</p>
          <h3 class="text-2xl font-semibold text-white">ğŸŒ Traceroute è·¯ç”±è¿½è¸ª</h3>
        </div>
      </div>

      <div class="space-y-4">
        <p class="text-sm text-slate-400">ä»æŒ‡å®šèŠ‚ç‚¹åˆ°ç›®æ ‡åœ°å€è¿›è¡Œè·¯ç”±è¿½è¸ªï¼Œåˆ†æç½‘ç»œè·¯å¾„å’Œå»¶è¿Ÿã€‚</p>
        
        <div class="grid gap-4 md:grid-cols-2">
          <div class="space-y-2">
            <label class="text-sm font-medium text-slate-300">é€‰æ‹©æºèŠ‚ç‚¹</label>
            <select id="traceroute-src-node" class="w-full rounded-lg border border-slate-700 bg-slate-800 p-3 text-white focus:border-cyan-500 focus:outline-none">
              <option value="">è¯·é€‰æ‹©èŠ‚ç‚¹...</option>
            </select>
          </div>
          <div class="space-y-2">
            <label class="text-sm font-medium text-slate-300">ç›®æ ‡åœ°å€</label>
            <input type="text" id="traceroute-target" placeholder="ä¾‹å¦‚: google.com æˆ– 8.8.8.8" class="w-full rounded-lg border border-slate-700 bg-slate-800 p-3 text-white placeholder-slate-500 focus:border-cyan-500 focus:outline-none">
          </div>
        </div>

        <div class="flex items-center gap-4">
          <button id="traceroute-start-btn" onclick="executeTraceroute()" class="px-5 py-2.5 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg text-sm font-bold transition">
            ğŸš€ å¼€å§‹è¿½è¸ª
          </button>
          <span id="traceroute-status" class="text-sm text-slate-400"></span>
        </div>

        <!-- Results Area -->
        <div id="traceroute-results" class="hidden space-y-3">
          <div class="flex items-center justify-between">
            <h4 class="font-semibold text-white">è¿½è¸ªç»“æœ</h4>
            <div class="text-xs text-slate-400">
              <span id="traceroute-meta"></span>
            </div>
          </div>
          <div id="traceroute-hops" class="rounded-xl border border-slate-700 bg-slate-900/60 p-4 max-h-96 overflow-y-auto">
            <!-- Hop results will be rendered here -->
          </div>
        </div>
      </div>
    </div>
  </div>



  <script type="module" src="/static/js/api.js"></script>
  <script type="module" src="/static/js/sidebar.js"></script>
  <script type="module" src="/static/js/dashboard.js"></script>
</body>
</html>
